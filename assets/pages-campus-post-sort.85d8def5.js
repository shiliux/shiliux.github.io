import{_ as t,n as s,r as a,b as e,E as i,o,e as l,a as r,w as c,h as n,F as d,f as u,g,c as m,d as h,t as p}from"./index-c4b61f01.js";const k=t({name:"PostSort.vue",props:{sortId:""},data:()=>({listPage:[],list:{total:0,current:0,size:6,pageList:[{id:1,title:"标题1",content:"内容1",userId:1,createTime:"2020-01-01 12:00:00",likeCount:10,userDto:{id:1,uid:1,phone:"12345678910",email:"123456@qq.com",username:"张三",icon:""},postImageList:[{id:1,postId:1,fileId:1,image:"",createTime:"2020-01-01 12:00:00"}]}]}}),created(){this.getListBySortId(this.sortId)},onReachBottom(){this.getNextPage()},methods:{getDetails(t){console.log("getDetails"),s({url:"/pages/campus/post/details?id="+t})},getListBySortId(t){a({url:e+"/web/post/page/"+t,method:"POST",data:{current:this.list.current,size:this.list.size},success:t=>{200===t.data.code&&(this.listPage=this.listPage.concat(t.data.data.pageList),this.list=t.data.data,this.list.total=t.data.data.total,this.list.current=t.data.data.current)}})},getNextPage(){this.list.current*this.list.size<this.list.total?(this.list.current++,this.getListBySortId(this.sortId)):i.error("已到尽头！")}}},[["render",function(t,s,a,e,i,k){const I=n("el-card"),f=n("el-col"),y=n("el-row"),v=n("van-button");return o(),l("div",{class:"container"},[r(y,null,{default:c((()=>[(o(!0),l(d,null,u(i.listPage,((t,s)=>(o(),m(f,{span:12,key:t.id,style:{"margin-bottom":"20px"}},{default:c((()=>[r(I,{class:"redbook-card",onClick:s=>k.getDetails(t.id)},{default:c((()=>[h("div",{class:"image-wrapper"},[t.postImageList.length>0?(o(),l("img",{key:0,src:t.postImageList[0].image,class:"image"},null,8,["src"])):(o(),l("img",{key:1,src:"https://static.runoob.com/images/demo/demo2.jpg",class:"image"}))]),h("div",{class:"card-content-wrapper"},[h("h3",{class:"title"},p(t.title),1),h("div",{class:"author-info"},[null!=t.userDto.icon?(o(),l("img",{key:0,src:t.userDto.icon,class:"author-avatar",alt:"icon"},null,8,["src"])):(o(),l("img",{key:1,src:"https://static.runoob.com/images/demo/demo1.jpg",class:"author-avatar",alt:"icon"})),h("span",{class:"author-name"},p(t.userDto.username),1),h("span",{class:"like-count"},p(t.likeCount),1)])])])),_:2},1032,["onClick"])])),_:2},1024)))),128))])),_:1}),r(v,{onClick:k.getNextPage,style:{width:"100%"}},{default:c((()=>[g("上拉刷新")])),_:1},8,["onClick"])])}],["__scopeId","data-v-506c6250"]]);export{k as default};
