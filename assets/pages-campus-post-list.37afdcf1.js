import{_ as t,n as e,r as s,b as a,o as i,e as o,a as l,w as n,h as c,F as r,f as d,c as m,d as g,t as u}from"./index-c4b61f01.js";const h=t({name:"login.vue",data:()=>({isLoading:!1,listPage:[],list:{total:0,current:1,size:6,pageList:[{id:1,title:"标题1",content:"内容1",userId:1,createTime:"2020-01-01 12:00:00",likeCount:10,userDto:{id:1,uid:1,phone:"12345678910",email:"123456@qq.com",username:"张三",icon:"https://static.runoob.com/images/demo/demo1.jpg"},postImageList:[{id:1,postId:1,fileId:1,image:"https://static.runoob.com/images/demo/demo1.jpg",createTime:"2020-01-01 12:00:00"}]}]}}),created(){this.getList()},mounted(){window.addEventListener("scroll",this.handleScroll)},beforeDestroy(){window.removeEventListener("scroll",this.handleScroll)},methods:{getDetails(t){console.log("getDetails"),e({url:"/pages/campus/post/details?id="+t})},getList(){s({url:a+"/web/post/page",method:"POST",data:{current:this.list.current,size:this.list.size},success:t=>{200===t.data.code&&(this.listPage=this.listPage.concat(t.data.data.pageList),this.list=t.data.data)}})},handleScroll(){const t=document.documentElement.scrollHeight,e=document.documentElement.scrollTop,s=document.documentElement.clientHeight;!this.isLoading&&e+s>=t&&(this.isLoading=!0,setTimeout((()=>{this.getNextPage()}),100))},getNextPage(){this.list.current<this.list.total&&(this.list.current++,this.getList()),this.isLoading=!1},prevPage(){this.list.current>1&&(this.list.current--,this.getList())},nextPage(){this.list.current<this.list.total&&(this.list.current++,this.getList())},formatDate:t=>new Date(t).toLocaleString()}},[["render",function(t,e,s,a,h,p){const L=c("el-card"),v=c("el-col"),f=c("el-row");return i(),o("div",{class:"container"},[l(f,null,{default:n((()=>[(i(!0),o(r,null,d(h.listPage,((t,e)=>(i(),m(v,{span:12,key:t.id,style:{"margin-bottom":"20px"}},{default:n((()=>[l(L,{class:"redbook-card",onClick:e=>p.getDetails(t.id)},{default:n((()=>[g("div",{class:"image-wrapper"},[t.postImageList.length>0?(i(),o("img",{key:0,src:t.postImageList[0].image,class:"image"},null,8,["src"])):(i(),o("img",{key:1,src:"https://static.runoob.com/images/demo/demo2.jpg",class:"image"}))]),g("div",{class:"card-content-wrapper"},[g("h3",{class:"title"},u(t.title),1),g("div",{class:"author-info"},[null!=t.userDto.icon?(i(),o("img",{key:0,src:t.userDto.icon,class:"author-avatar",alt:"icon"},null,8,["src"])):(i(),o("img",{key:1,src:"https://static.runoob.com/images/demo/demo1.jpg",class:"author-avatar",alt:"icon"})),g("span",{class:"author-name"},u(t.userDto.username),1),g("span",{class:"like-count"},u(t.likeCount),1)])])])),_:2},1032,["onClick"])])),_:2},1024)))),128))])),_:1})])}],["__scopeId","data-v-5d8703e6"]]);export{h as default};
