import{_ as e,l as a,u as l,r as s,b as o,o as t,e as d,d as i,a as r,w as n,h as u,F as c,f as m,g as f,c as p}from"./index-c4b61f01.js";import{P as h}from"./sort.25787466.js";const g=e({name:"details.vue",data:()=>({sorts:h,dialogVisible:!1,goodsSortList:[],FileUserList:[],form:{postImages:[]},fileList:[],headers:{Authorization:a("token")},uploadData:{fileUseId:null},uploadUrl:l,dialogImageUrl:""}),onLoad(e){},created(){this.getFileUserList()},methods:{saveGoods(){s({url:o+"/web/post/save",method:"POST",data:this.form,success:e=>{200===e.data.code&&this.$message.success(e.data.message)}})},handleSuccess(e,a){this.form.postImages.push(e.data.id)},handlePictureCardPreview(e){if(e.raw){const a=URL.createObjectURL(e.raw);this.dialogImageUrl=a,this.dialogVisible=!0}},handleRemove(e,a){const l=e.response.data.id,s=this.form.postImages.indexOf(l);s>-1&&this.form.postImages.splice(s,1)},getFileUserList(){s({url:o+"/web/fileUser/getIdByName/论坛",success:e=>{200===e.data.code&&(this.uploadData.fileUseId=e.data.data.id)}})}}},[["render",function(e,a,l,s,o,h){const g=u("el-input"),v=u("el-option"),w=u("el-select"),U=u("el-text"),V=u("el-icon"),b=u("el-upload"),I=u("el-dialog"),L=u("el-button");return t(),d("div",{class:"container"},[i("div",null,[r(g,{placeholder:"标题",modelValue:o.form.title,"onUpdate:modelValue":a[0]||(a[0]=e=>o.form.title=e)},null,8,["modelValue"]),r(g,{placeholder:"内容",modelValue:o.form.content,"onUpdate:modelValue":a[1]||(a[1]=e=>o.form.content=e)},null,8,["modelValue"]),r(w,{modelValue:o.form.sort,"onUpdate:modelValue":a[2]||(a[2]=e=>o.form.sort=e),placeholder:"分类",style:{width:"100%"}},{default:n((()=>[(t(!0),d(c,null,m(o.sorts,(e=>(t(),p(v,{key:e.id,label:e.name,value:e.id},null,8,["label","value"])))),128))])),_:1},8,["modelValue"]),i("div",null,[r(U,{class:"mx-1",type:"info"},{default:n((()=>[f("注意：图片显示出来才算上传成功！")])),_:1})]),r(b,{"file-list":o.fileList,"onUpdate:fileList":a[3]||(a[3]=e=>o.fileList=e),action:o.uploadUrl,headers:o.headers,data:o.uploadData,"list-type":"picture-card","on-preview":h.handlePictureCardPreview,"on-remove":h.handleRemove,"on-success":h.handleSuccess},{default:n((()=>[r(V,null,{default:n((()=>[(t(),d("svg",{viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg","data-v-ea893728":""},[i("path",{fill:"currentColor",d:"M480 480V128a32 32 0 0 1 64 0v352h352a32 32 0 1 1 0 64H544v352a32 32 0 1 1-64 0V544H128a32 32 0 0 1 0-64h352z"})]))])),_:1})])),_:1},8,["file-list","action","headers","data","on-preview","on-remove","on-success"]),r(I,{modelValue:o.dialogVisible,"onUpdate:modelValue":a[4]||(a[4]=e=>o.dialogVisible=e)},{default:n((()=>[i("img",{src:o.dialogImageUrl,alt:"Preview Image",style:{width:"100%"}},null,8,["src"])])),_:1},8,["modelValue"]),r(L,{onClick:h.saveGoods,style:{width:"100%","background-color":"rgb(0, 8, 255)",color:"#fff"}},{default:n((()=>[f("添加")])),_:1},8,["onClick"])])])}],["__scopeId","data-v-8a0a9948"]]);export{g as default};
