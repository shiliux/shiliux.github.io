import{_ as e,l as a,u as l,r as o,b as t,o as s,e as d,a as i,w as u,h as r,d as n,F as m,f as c,g as f,c as p}from"./index-2efd2de3.js";import{P as h}from"./sort.25787466.js";const v=e({name:"details.vue",data:()=>({active:0,postSorts:h,dialogVisible:!1,goodsSortList:[],status:[{value:0,name:"出售中"},{value:1,name:"停止出售"}],FileUserList:[],form:{postImages:[],goodsImages:[]},fileList:[],headers:{Authorization:a("token")},uploadData:{fileUseId:null},uploadDataGoods:{fileUseId:null},uploadUrl:l,dialogImageUrl:""}),onLoad(e){},created(){this.getFileUserList(),this.getGoodsSortList()},methods:{getGoodsSortList(){o({url:t+"/web/goodsSort/list",method:"GET",success:e=>{200===e.data.code&&(this.goodsSortList=e.data.data)}})},saveGoods(){o({url:t+"/web/goods/save",method:"POST",data:this.form,success:e=>{200===e.data.code&&this.$message.success(e.data.message)}})},savePost(){o({url:t+"/web/post/save",method:"POST",data:this.form,success:e=>{200===e.data.code&&this.$message.success(e.data.message)}})},handleSuccess(e,a){this.form.postImages.push(e.data.id),this.form.goodsImages.push(e.data.id)},handlePictureCardPreview(e){if(e.raw){const a=URL.createObjectURL(e.raw);this.dialogImageUrl=a,this.dialogVisible=!0}},handleRemove(e,a){const l=e.response.data.id,o=this.form.postImages.indexOf(l);o>-1&&this.form.postImages.splice(o,1)},getFileUserList(){o({url:t+"/web/fileUser/getIdByName/论坛",success:e=>{200===e.data.code&&(this.uploadData.fileUseId=e.data.data.id)}}),o({url:t+"/web/fileUser/getIdByName/商品",success:e=>{200===e.data.code&&(this.uploadDataGoods.fileUseId=e.data.data.id)}})}}},[["render",function(e,a,l,o,t,h){const v=r("el-input"),g=r("el-option"),V=r("el-select"),w=r("el-text"),U=r("el-icon"),b=r("el-upload"),I=r("el-dialog"),L=r("el-button"),_=r("van-tab"),S=r("el-input-number"),y=r("van-tabs");return s(),d("div",{class:"container"},[i(y,{modelValue:t.active,"onUpdate:modelValue":a[12]||(a[12]=e=>t.active=e)},{default:u((()=>[i(_,{title:"分享"},{default:u((()=>[n("div",null,[i(v,{placeholder:"标题",modelValue:t.form.title,"onUpdate:modelValue":a[0]||(a[0]=e=>t.form.title=e)},null,8,["modelValue"]),i(v,{placeholder:"内容",modelValue:t.form.content,"onUpdate:modelValue":a[1]||(a[1]=e=>t.form.content=e)},null,8,["modelValue"]),i(V,{modelValue:t.form.sort,"onUpdate:modelValue":a[2]||(a[2]=e=>t.form.sort=e),placeholder:"分类",style:{width:"100%"}},{default:u((()=>[(s(!0),d(m,null,c(t.postSorts,(e=>(s(),p(g,{key:e.id,label:e.name,value:e.id},null,8,["label","value"])))),128))])),_:1},8,["modelValue"]),n("div",null,[i(w,{class:"mx-1",type:"info"},{default:u((()=>[f("注意：图片显示出来才算上传成功！")])),_:1})]),i(b,{"file-list":t.fileList,"onUpdate:fileList":a[3]||(a[3]=e=>t.fileList=e),action:t.uploadUrl,headers:t.headers,data:t.uploadData,"list-type":"picture-card","on-preview":h.handlePictureCardPreview,"on-remove":h.handleRemove,"on-success":h.handleSuccess},{default:u((()=>[i(U,null,{default:u((()=>[(s(),d("svg",{viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg","data-v-ea893728":""},[n("path",{fill:"currentColor",d:"M480 480V128a32 32 0 0 1 64 0v352h352a32 32 0 1 1 0 64H544v352a32 32 0 1 1-64 0V544H128a32 32 0 0 1 0-64h352z"})]))])),_:1})])),_:1},8,["file-list","action","headers","data","on-preview","on-remove","on-success"]),i(I,{modelValue:t.dialogVisible,"onUpdate:modelValue":a[4]||(a[4]=e=>t.dialogVisible=e)},{default:u((()=>[n("img",{"w-full":"",src:t.dialogImageUrl,alt:"Preview Image",style:{width:"100%"}},null,8,["src"])])),_:1},8,["modelValue"]),i(L,{onClick:h.savePost,style:{width:"100%","background-color":"rgb(0, 8, 255)",color:"#fff"}},{default:u((()=>[f("添加")])),_:1},8,["onClick"])])])),_:1}),i(_,{title:"商品"},{default:u((()=>[n("div",null,[i(v,{placeholder:"名称",modelValue:t.form.name,"onUpdate:modelValue":a[5]||(a[5]=e=>t.form.name=e)},null,8,["modelValue"]),i(v,{placeholder:"描述",modelValue:t.form.description,"onUpdate:modelValue":a[6]||(a[6]=e=>t.form.description=e)},null,8,["modelValue"]),n("div",null,[i(S,{placeholder:"价格",modelValue:t.form.price,"onUpdate:modelValue":a[7]||(a[7]=e=>t.form.price=e),min:0,max:100},null,8,["modelValue"])]),i(V,{modelValue:t.form.status,"onUpdate:modelValue":a[8]||(a[8]=e=>t.form.status=e),placeholder:"状态"},{default:u((()=>[(s(!0),d(m,null,c(t.status,(e=>(s(),p(g,{key:e.value,label:e.name,value:e.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue"]),i(V,{modelValue:t.form.goodsSortId,"onUpdate:modelValue":a[9]||(a[9]=e=>t.form.goodsSortId=e),placeholder:"分类"},{default:u((()=>[(s(!0),d(m,null,c(t.goodsSortList,(e=>(s(),p(g,{key:e.id,label:e.name,value:e.id},null,8,["label","value"])))),128))])),_:1},8,["modelValue"]),i(b,{"file-list":t.fileList,"onUpdate:fileList":a[10]||(a[10]=e=>t.fileList=e),action:t.uploadUrl,headers:t.headers,data:t.uploadDataGoods,"list-type":"picture-card","on-preview":h.handlePictureCardPreview,"on-remove":h.handleRemove,"on-success":h.handleSuccess},{default:u((()=>[i(U,null,{default:u((()=>[(s(),d("svg",{viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg","data-v-ea893728":""},[n("path",{fill:"currentColor",d:"M480 480V128a32 32 0 0 1 64 0v352h352a32 32 0 1 1 0 64H544v352a32 32 0 1 1-64 0V544H128a32 32 0 0 1 0-64h352z"})]))])),_:1})])),_:1},8,["file-list","action","headers","data","on-preview","on-remove","on-success"]),i(I,{modelValue:t.dialogVisible,"onUpdate:modelValue":a[11]||(a[11]=e=>t.dialogVisible=e)},{default:u((()=>[n("img",{"w-full":"",src:t.dialogImageUrl,alt:"Preview Image",style:{width:"100%"}},null,8,["src"])])),_:1},8,["modelValue"]),i(L,{onClick:h.saveGoods,style:{width:"100%","background-color":"rgb(0, 8, 255)",color:"#fff"}},{default:u((()=>[f("添加")])),_:1},8,["onClick"])])])),_:1})])),_:1},8,["modelValue"])])}],["__scopeId","data-v-78921fd4"]]);export{v as default};
