import{_ as e,l as s,r as l,b as a,E as t,o as c,c as o,w as r,i as u,e as d,d as i,a as h,g as v,j as n,f as m,F as b,h as p,t as g,m as k}from"./index-5ad73b38.js";const y=e({name:"login.vue",data:()=>({roleId:4,voucherOrders:[],voucherCount:null,couponId:null,vouchers:[{title:"80元优惠卷",subTitle:"周一至周日均可使用",payValue:100,actualValue:80,stock:10,createTime:"2023-06-01",updateTime:"2025-06-01"}]}),mounted(){this.queryVoucher(),this.getMyOrder();const e=JSON.parse(s("userDto"));this.roleId=e.roleId},methods:{seckill(){l({url:a+"/web/voucher-order/seckill/1",method:"GET",success:e=>{200===e.data.code?(this.$message.success("抢卷成功！"),this.$message.success("优惠卷订单号为："+e.data.data),this.getMyOrder()):t.error(e.data.message)}})},queryVoucher(){l({url:a+"/web/voucher/list",method:"GET",success:e=>{200===e.data.code?this.vouchers=e.data.data:t.error(e.data.message)}})},getMyOrder(){l({url:a+"/web/voucher-order/list",method:"GET",success:e=>{200===e.data.code?this.voucherOrders=e.data.data:t.error(e.data.message)}})},formatTime:e=>"",deleteVoucherOrderByUserId(){l({url:a+"/web/voucher-order/delete",method:"GET",success:e=>{200===e.data.code?this.$message.success("删除成功！"):t.error(e.data.message)}})},updateVoucherCount(e){l({url:a+"/web/voucher/setVoucherCount/"+e,method:"GET",success:e=>{200===e.data.code?this.$message.success("修改成功！"):t.error(e.data.message)}})}}},[["render",function(e,s,l,a,t,y){const V=p("el-button"),f=p("el-input"),T=p("van-cell"),C=u;return c(),o(C,null,{default:r((()=>[1==t.roleId?(c(),d("div",{key:0},[i("div",null,[h(V,{onClick:s[0]||(s[0]=e=>y.deleteVoucherOrderByUserId())},{default:r((()=>[v("删除我的优惠卷")])),_:1})]),i("div",null,[h(f,{modelValue:t.voucherCount,"onUpdate:modelValue":s[1]||(s[1]=e=>t.voucherCount=e),value:t.voucherCount,placeholder:"请输入优惠券数量",style:{width:"10%"}},null,8,["modelValue","value"]),h(V,{onClick:s[2]||(s[2]=e=>y.updateVoucherCount(t.voucherCount))},{default:r((()=>[v("修改")])),_:1})])])):n("v-if",!0),i("div",{class:"shop-voucher"},[i("div",null,[i("span",{class:"voucher-icon"},"券"),i("span",{style:{"font-weight":"bold"}},"代金券")]),(c(!0),d(b,null,m(t.vouchers,(e=>(c(),d("div",{class:"voucher-box",key:e.id},[i("div",{class:"voucher-circle"},[i("div",{class:"voucher-b"}),i("div",{class:"voucher-b"}),i("div",{class:"voucher-b"})]),i("div",{class:"voucher-left"},[i("div",{class:"voucher-title"},g(e.title),1),i("div",{class:"voucher-subtitle"},g(e.subTitle),1),i("div",{class:"voucher-price"},[i("div",null,"￥ "+g(e.payValue),1),i("span",null,g(10*e.payValue/e.actualValue)+"折",1)])]),i("div",{class:"voucher-right"},[i("div",{class:"seckill-box"},[i("div",{class:k(["voucher-btn",{"disable-btn":e.stock<1}]),onClick:s[3]||(s[3]=e=>y.seckill())},"限时抢购",2),i("div",{class:"seckill-stock"},[v("剩余 "),i("span",null,g(e.stock),1),v(" 张")]),i("div",{class:"seckill-time"},g(y.formatTime(e)),1)])])])))),128))]),i("div",{style:{"margin-top":"10%"}},[i("div",null,"我的优惠卷："),(c(!0),d(b,null,m(t.voucherOrders,(e=>(c(),d("div",null,[i("div",{style:{margin:"5%","background-color":"#ec0000",color:"white"}},[h(T,{title:e.voucher.title,label:e.voucher.subTitle},null,8,["title","label"])])])))),256))])])),_:1})}],["__scopeId","data-v-c337ae12"]]);export{y as default};
