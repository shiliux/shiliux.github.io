import{_ as s,n as e,r as a,E as t,s as i,q as d,o as r,c as l,w as u,i as c,a as n,b as o,t as m,h as g,f as p,d as h,e as f,F as y,g as k}from"./index-6d9172db.js";const v=s({name:"user.vue",data:()=>({List:{},isFriend:!1,user:{}}),onLoad(s){this.user.uid=s.uid,this.getUser(this.user.uid),this.checkFriend(this.user.uid)},methods:{getDetails(s){e({url:"/pages/campus/post/details?id="+s})},getUserList(s){a({url:`/api/web/post/list/${s}`,method:"GET",success:s=>{200===s.data.code?this.List=s.data.data:t.error(s.data.message)}})},navigateToChat(s){i("chatWithTuid",s),d({url:"/pages/campus/chat/index"})},addFriend(s){a({url:`/api/web/user-friend/add/${s}`,method:"GET",success:s=>{200===s.data.code?t.success(s.data.message):t.error(s.data.message)}})},getUser(s){a({url:`/api/web/user/uid/${s}`,method:"GET",success:s=>{200===s.data.code?(this.user=s.data.data,this.getUserList(this.user.id)):t.error(s.data.message)}})},checkFriend(s){a({url:`/api/web/user-friend/check/${s}`,method:"GET",success:s=>{200===s.data.code&&(this.isFriend=!0)}})}}},[["render",function(s,e,a,t,i,d){const v=k("el-avatar"),_=k("el-button"),b=k("el-card"),F=c,L=k("el-col"),T=k("el-row");return r(),l(F,null,{default:u((()=>[n(F,null,{default:u((()=>[n(b,{style:{padding:"0"}},{default:u((()=>[o("div",{class:"avatar",style:{margin:"3%"}},[n(v,{size:150,src:i.user.icon},null,8,["src"])]),o("div",{style:{padding:"14px"}},[o("span",null,m("用户名: "+i.user.username),1),o("div",{class:"bottom"},[o("time",{class:"time"},m("UID: "+i.user.uid),1),g(" TODO "),i.isFriend?(r(),l(_,{key:0,type:"primary",onClick:e[0]||(e[0]=s=>d.navigateToChat(i.user.uid))},{default:u((()=>[p("聊天")])),_:1})):(r(),l(_,{key:1,class:"button",onClick:e[1]||(e[1]=s=>d.addFriend(i.user.uid))},{default:u((()=>[p("添加")])),_:1}))])])])),_:1})])),_:1}),n(F,null,{default:u((()=>[n(T,null,{default:u((()=>[(r(!0),h(y,null,f(i.List,((s,e)=>(r(),l(L,{span:22,key:s.id,style:{margin:"2%"}},{default:u((()=>[n(b,{"body-style":{padding:"0px"}},{default:u((()=>[o("div",{onClick:e=>d.getDetails(s.id)},[s.postImageList.length>0?(r(),h("img",{key:0,src:s.postImageList[0].image,class:"image"},null,8,["src"])):(r(),h("img",{key:1,src:"https://static.runoob.com/images/demo/demo2.jpg",class:"image"}))],8,["onClick"]),o("div",{style:{padding:"14px"}},[o("span",null,m(s.title),1),o("div",{class:"bottom"},[o("time",{class:"time"},m(s.content),1)])])])),_:2},1024)])),_:2},1024)))),128))])),_:1})])),_:1})])),_:1})}],["__scopeId","data-v-845cefaa"]]);export{v as default};
