import{_ as e,E as o,u as a,r as l,n as s,o as t,c as d,w as r,i as n,a as i,f as u,t as c,h as m,g as f}from"./index-058fdd0f.js";const p=e({name:"register",data:()=>({form:{phone:"",code:"",uid:"",password:"",email:""},countdown:0,isCountdown:!1}),methods:{getCode(){if(this.isCountdown)return;if(""===this.form.phone)return void o.error("请输入手机号");a.get(`/api/auth/login/code/phone/${this.form.phone}`).then((e=>{o.success("验证码获取成功")})),this.isCountdown=!0,this.countdown=60;let e=setInterval((()=>{this.countdown>0?this.countdown--:(this.isCountdown=!1,clearInterval(e))}),1e3)},formSubmit(){""!==this.form.phone&&""!==this.form.password&&""!==this.form.code?(""===this.form.uid&&(this.form.uid=this.form.phone),l({url:"/api/auth/login/phone/code",method:"POST",data:this.form,success:e=>{200===e.data.code?(o({message:e.data.message,type:"success"}),s({url:"/pages/campus/user/login"}).then((e=>{}))):o.error(e.data.message)},fail:()=>{}})):o.error("请输入完整信息")},goTo(e){s({url:e})}}},[["render",function(e,o,a,l,s,p){const h=f("van-field"),b=n,w=f("van-button"),g=f("van-form");return t(),d(b,{class:"container"},{default:r((()=>[i(g,{onSubmit:p.formSubmit,ref:"form","lazy-validation":""},{default:r((()=>[i(h,{modelValue:s.form.phone,"onUpdate:modelValue":o[0]||(o[0]=e=>s.form.phone=e),label:"手机号",placeholder:"请输入手机号",required:"",clearable:""},null,8,["modelValue"]),i(b,{class:"code-container"},{default:r((()=>[i(h,{type:"number",modelValue:s.form.code,"onUpdate:modelValue":o[1]||(o[1]=e=>s.form.code=e),label:"验证码",placeholder:"请输入验证码",required:"",clearable:"",class:"code-input"},null,8,["modelValue"]),i(b,{onClick:p.getCode,class:"get-code",disabled:s.isCountdown},{default:r((()=>[u(c(s.isCountdown?`${s.countdown}秒`:"验证码"),1)])),_:1},8,["onClick","disabled"])])),_:1}),m('      <van-field v-model="form.uid" label="UID" placeholder="请输入UID" required clearable />'),i(h,{type:"password",modelValue:s.form.password,"onUpdate:modelValue":o[2]||(o[2]=e=>s.form.password=e),label:"密码",placeholder:"请输入密码",required:"",clearable:"","show-password":""},null,8,["modelValue"]),m('      <van-field v-model="form.email" label="邮箱" placeholder="请输入邮箱" required clearable />'),i(w,{type:"primary","native-type":"submit",class:"submit-button"},{default:r((()=>[u("注册")])),_:1}),i(w,{type:"default",class:"login-button",onClick:o[3]||(o[3]=e=>p.goTo("./login"))},{default:r((()=>[u("登录")])),_:1})])),_:1},8,["onSubmit"])])),_:1})}],["__scopeId","data-v-157ccc02"]]);export{p as default};
